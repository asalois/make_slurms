require 'erb'
require_relative 'ap_host'

desc "make a config file"
task :config do
  Rake::Task["clean"].invoke

  # host = ApHost.new
  # host.interface = "wlx1cbfce129db2"

  host = ApHost.new do |h|
    h.interface = "wlx1cbfce129db2"
  end

  template = File.read("hostapd.conf.erb")

  File.open("hostapd.conf", "w") do |f|
    f.write ERB.new(template).result(binding)
  end
end

desc "remove written file"
task :clean do
  File.delete("hostapd.conf")
end
